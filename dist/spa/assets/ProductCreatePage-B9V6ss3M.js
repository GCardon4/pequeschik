import{Q as P,a as u}from"./QForm-90DJ6nET.js";import{Q as q}from"./QSelect-BirRY9PP.js";import{u as S,Q as U}from"./use-quasar-DQqmvNCY.js";import{Q as k}from"./QImg-DHjvgfIN.js";import{a as w,r as p,b as n,p as x,f as v,o as f,w as d,n as i,g as o,a1 as z,$ as E,ak as L,Q as g}from"./index-DiEdNpAm.js";import{Q as A}from"./QCardSection-CdfC2__H.js";import{Q as F}from"./QCard-BnjgYA5k.js";import{Q as M}from"./QPage-CR5WA-Gg.js";import{u as N}from"./productStore-CtLSqim-.js";import"./use-key-composition-DP3xD1YA.js";import"./use-dark-Cxtu31Fc.js";import"./focus-manager-zjdVGI5d.js";import"./QDialog-CHBaHg74.js";import"./selection-DYYMGatu.js";import"./use-timeout-zWbflF2y.js";import"./format-E0ePlZ8J.js";const B={class:"row q-gutter-md"},R={class:"row items-center q-gutter-md"},$={class:"q-mt-lg"},ae={__name:"ProductCreatePage",setup(j){const b=w(),m=S(),s=N(),a=p({name:"",reference:"",category:null,avatar_url:"",subcategory:"",sizes:"",price:0,stock:0}),r=p(null),V=n(()=>s.getLoadingStatus),y=n(()=>s.getAllCategories),c=n(()=>r.value?URL.createObjectURL(r.value):null);x(()=>{s.fetchAllCategories()});const Q=t=>{r.value=t},C=async()=>{try{let t="";r.value&&(t=await s.uploadAvatarImage(r.value));const l={...a.value,avatar_url:t,category_id:a.value.category?.id};delete l.category,await s.createProduct(l),m.notify({color:"positive",message:"Producto creado correctamente",icon:"check_circle"}),b.push({name:"product-list"})}catch(t){m.notify({color:"negative",message:t.message||"Error al crear el producto.",icon:"error"})}};return(t,l)=>(f(),v(M,{class:"q-pa-md"},{default:d(()=>[l[9]||(l[9]=i("div",{class:"text-h4 q-mb-md"},"Crear Nuevo Producto",-1)),o(F,null,{default:d(()=>[o(A,null,{default:d(()=>[o(P,{onSubmit:z(C,["prevent"]),class:"q-gutter-md"},{default:d(()=>[o(u,{modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.name=e),label:"Nombre del Producto",filled:"","lazy-rules":"",rules:[e=>!!e||"El nombre es requerido"]},null,8,["modelValue","rules"]),o(u,{modelValue:a.value.reference,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.reference=e),label:"Referencia",filled:"","lazy-rules":"",rules:[e=>!!e||"La referencia es requerida"]},null,8,["modelValue","rules"]),o(q,{modelValue:a.value.category,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.category=e),options:y.value,"option-label":"name",label:"Categoría",filled:"","lazy-rules":"",rules:[e=>!!e||"La categoría es requerida"]},null,8,["modelValue","options","rules"]),o(u,{modelValue:a.value.subcategory,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.subcategory=e),label:"Subcategoría",filled:"",placeholder:"Ej: Camisetas, Pantalones"},null,8,["modelValue"]),o(u,{modelValue:a.value.sizes,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.sizes=e),label:"Tallas",filled:"",placeholder:"Ej: S, M, L, XL"},null,8,["modelValue"]),i("div",B,[o(u,{modelValue:a.value.price,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.price=e),modelModifiers:{number:!0},label:"Precio",type:"number",filled:"",prefix:"COP $",class:"col",rules:[e=>e>=0||"El precio no puede ser negativo"]},null,8,["modelValue","rules"]),o(u,{modelValue:a.value.stock,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value.stock=e),modelModifiers:{number:!0},label:"Stock",type:"number",filled:"",class:"col",rules:[e=>e>=0||"El stock no puede ser negativo",e=>/^\d+$/.test(e)||"El stock debe ser un número entero"]},null,8,["modelValue","rules"])]),l[8]||(l[8]=i("div",{class:"text-subtitle1 q-mt-md"},"Avatar del Producto",-1)),i("div",R,[o(U,{modelValue:r.value,"onUpdate:modelValue":[l[7]||(l[7]=e=>r.value=e),Q],label:"Seleccionar imagen principal",accept:"image/*",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),c.value?(f(),v(L,{key:0,size:"100px"},{default:d(()=>[o(k,{src:c.value,ratio:"1"},null,8,["src"])]),_:1})):E("",!0)]),i("div",$,[o(g,{label:"Crear Producto",type:"submit",color:"primary",loading:V.value},null,8,["loading"]),o(g,{label:"Cancelar",color:"grey",class:"q-ml-sm",to:{name:"product-list"}})])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ae as default};
