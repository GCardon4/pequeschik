import{Q as ge}from"./QSpinnerGears-OYeB-dz2.js";import{q as he,y as ye,r as y,b as Q,H as j,z as L,K as z,N as F,s as W,a2 as be,v as _e,U as we,a3 as ke,p as xe,f as S,o as l,w as h,i as v,g as i,n as r,$ as k,Q as C,h as $,t as x,F as G,k as K}from"./index-DiEdNpAm.js";import{u as D,v as Pe,a as J,b as Te,p as X,c as Se,d as Ce,e as qe,f as Qe,g as Oe,h as Ve,r as Y,s as Ee,Q as Z,i as He}from"./QDialog-CHBaHg74.js";import{u as $e,s as De,a as Ne,b as Ie,c as ee,g as Be}from"./selection-DYYMGatu.js";import{u as Ae}from"./use-timeout-zWbflF2y.js";import{Q as N}from"./QImg-DHjvgfIN.js";import{Q as Re}from"./QSeparator-Bg7CM5Ey.js";import{Q as Me}from"./QCardSection-CdfC2__H.js";import{Q as te}from"./QCard-BnjgYA5k.js";import{Q as Ue}from"./QPage-CR5WA-Gg.js";import{u as je}from"./productStore-CtLSqim-.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-Cxtu31Fc.js";import"./focus-manager-zjdVGI5d.js";const ze=he({name:"QTooltip",inheritAttrs:!1,props:{...Te,...Ne,...D,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...D.transitionShow,default:"jump-down"},transitionHide:{...D.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:J},self:{type:String,default:"top middle",validator:J},offset:{type:Array,default:()=>[14,14],validator:Pe},scrollTarget:De,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...$e],setup(o,{slots:O,emit:b,attrs:t}){let c,d;const f=ye(),{proxy:{$q:n}}=f,p=y(null),_=y(!1),V=Q(()=>X(o.anchor,n.lang.rtl)),u=Q(()=>X(o.self,n.lang.rtl)),e=Q(()=>o.persistent!==!0),{registerTick:a,removeTick:q}=Se(),{registerTimeout:w}=Ae(),{transitionProps:oe,transitionStyle:ae}=Ce(o),{localScrollTarget:I,changeScrollEvent:se,unconfigureScrollTarget:le}=qe(o,M),{anchorEl:m,canShow:re,anchorEvents:P}=Qe({showing:_,configureAnchorEl:ve}),{show:ne,hide:E}=Ie({showing:_,canShow:re,handleShow:ue,handleHide:ce,hideOnRouteChange:e,processOnMount:!0});Object.assign(P,{delayShow:de,delayHide:me});const{showPortal:B,hidePortal:A,renderPortal:ie}=Oe(f,p,pe,"tooltip");if(n.platform.is.mobile===!0){const s={anchorEl:m,innerRef:p,onClickOutside(g){return E(g),g.target.classList.contains("q-dialog__backdrop")&&we(g),!0}},H=Q(()=>o.modelValue===null&&o.persistent!==!0&&_.value===!0);j(H,g=>{(g===!0?Ve:Y)(s)}),L(()=>{Y(s)})}function ue(s){B(),a(()=>{d=new MutationObserver(()=>T()),d.observe(p.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),T(),M()}),c===void 0&&(c=j(()=>n.screen.width+"|"+n.screen.height+"|"+o.self+"|"+o.anchor+"|"+n.lang.rtl,T)),w(()=>{B(!0),b("show",s)},o.transitionDuration)}function ce(s){q(),A(),R(),w(()=>{A(!0),b("hide",s)},o.transitionDuration)}function R(){d!==void 0&&(d.disconnect(),d=void 0),c!==void 0&&(c(),c=void 0),le(),z(P,"tooltipTemp")}function T(){Ee({targetEl:p.value,offset:o.offset,anchorEl:m.value,anchorOrigin:V.value,selfOrigin:u.value,maxHeight:o.maxHeight,maxWidth:o.maxWidth})}function de(s){if(n.platform.is.mobile===!0){ee(),document.body.classList.add("non-selectable");const H=m.value,g=["touchmove","touchcancel","touchend","click"].map(U=>[H,U,"delayHide","passiveCapture"]);F(P,"tooltipTemp",g)}w(()=>{ne(s)},o.delay)}function me(s){n.platform.is.mobile===!0&&(z(P,"tooltipTemp"),ee(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),w(()=>{E(s)},o.hideDelay)}function ve(){if(o.noParentEvent===!0||m.value===null)return;const s=n.platform.is.mobile===!0?[[m.value,"touchstart","delayShow","passive"]]:[[m.value,"mouseenter","delayShow","passive"],[m.value,"mouseleave","delayHide","passive"]];F(P,"anchor",s)}function M(){if(m.value!==null||o.scrollTarget!==void 0){I.value=Be(m.value,o.scrollTarget);const s=o.noParentEvent===!0?T:E;se(I.value,s)}}function fe(){return _.value===!0?W("div",{...t,ref:p,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",t.class],style:[t.style,ae.value],role:"tooltip"},_e(O.default)):null}function pe(){return W(be,oe.value,fe)}return L(R),Object.assign(f.proxy,{updatePosition:T}),ie}}),Fe={key:0,class:"flex flex-center"},We={key:1,class:"product-view-container"},Ge={class:"text-h4 q-mb-sm"},Ke={class:"text-subtitle1 text-grey-7"},Je={key:1,class:"text-h6 q-mt-md"},Xe={class:"text-h5 text-bold q-my-md text-primary"},Ye={key:2,class:"q-my-md"},Ze={class:"row q-gutter-sm"},et={key:3,class:"q-mt-md"},tt={class:"row items-center justify-between"},ot={class:"text-subtitle1"},at={class:"text-bold"},st={class:"row q-gutter-md"},lt={key:0,class:"q-mt-xl"},rt={class:"row q-gutter-md"},nt={key:2,class:"text-center"},it={__name:"ProductViewPage",setup(o){const O=ke(),b=je(),t=y(null),c=y([]),d=y(!0),f=y(!1),n=y("");xe(async()=>{const u=O.params.id;d.value=!0,await b.fetchProductById(u),t.value=b.selectedProduct,t.value&&(c.value=await b.fetchGallery(u)),d.value=!1});function p(u){n.value=u,f.value=!0}function _(){const u="573215698895",e=t.value.name,a=t.value.reference,q=`Hola, estoy interesado en el producto: *${e}* (Ref: *${a}*). ¿Podrías darme más información?`,w=`https://wa.me/${u}?text=${encodeURIComponent(q)}`;window.open(w,"_blank")}const V=u=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(u);return(u,e)=>(l(),S(Ue,{class:"q-pa-md"},{default:h(()=>[d.value?(l(),v("div",Fe,[i(ge,{size:"50px",color:"primary"})])):t.value?(l(),v("div",We,[i(C,{flat:"",icon:"arrow_back",label:"Volver al catálogo",onClick:e[0]||(e[0]=a=>u.$router.go(-1)),class:"q-mb-md"}),r("div",{class:"cursor-pointer",onClick:e[1]||(e[1]=a=>p(t.value.avatar_url))},[i(N,{src:t.value.avatar_url,class:"product-avatar-large rounded-borders"},{default:h(()=>[i(ze,null,{default:h(()=>[...e[4]||(e[4]=[$("Haz clic para ver la imagen completa",-1)])]),_:1})]),_:1},8,["src"])]),i(te,{flat:"",bordered:"",class:"q-mt-lg"},{default:h(()=>[i(Me,null,{default:h(()=>[r("div",Ge,x(t.value.name),1),r("div",Ke,"Ref: "+x(t.value.reference),1),t.value.category?(l(),S(Z,{key:0,label:t.value.category.name,color:"primary","text-color":"white",class:"q-mt-sm"},null,8,["label"])):k("",!0),t.value.subcategory?(l(),v("div",Je,x(t.value.subcategory),1)):k("",!0),r("div",Xe,x(V(t.value.price)),1),t.value.sizes?(l(),v("div",Ye,[e[5]||(e[5]=r("div",{class:"text-subtitle2"},"Tallas disponibles:",-1)),r("div",Ze,[(l(!0),v(G,null,K(t.value.sizes.split(","),a=>(l(),S(Z,{key:a,label:a.trim(),outline:"",color:"secondary"},null,8,["label"]))),128))])])):k("",!0),t.value.description?(l(),v("div",et,[r("p",null,x(t.value.description),1)])):k("",!0),i(Re,{class:"q-my-lg"}),r("div",tt,[r("div",ot,[e[6]||(e[6]=$(" Stock: ",-1)),r("span",at,x(t.value.stock),1),e[7]||(e[7]=$(" unidades ",-1))]),r("div",st,[i(C,{round:"",color:"pink",icon:"favorite_border"}),i(C,{unelevated:"",color:"positive",icon:"whatsapp",label:"Compra",onClick:_})])])]),_:1})]),_:1}),c.value.length>0?(l(),v("div",lt,[e[8]||(e[8]=r("div",{class:"text-h6 q-mb-md"},"Galería del Producto",-1)),r("div",rt,[(l(!0),v(G,null,K(c.value,a=>(l(),S(N,{key:a.id,src:a.image_url,class:"gallery-thumbnail cursor-pointer rounded-borders",onClick:q=>p(a.image_url)},null,8,["src","onClick"]))),128))])])):k("",!0)])):(l(),v("div",nt,[e[9]||(e[9]=r("div",{class:"text-h5"},"Producto no encontrado",-1)),i(C,{to:"/",label:"Volver al inicio",color:"primary",class:"q-mt-md"})])),i(He,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value=a)},{default:h(()=>[i(te,{style:{"max-width":"500px","max-height":"500px"},class:""},{default:h(()=>[n.value?(l(),S(N,{key:0,src:n.value,fit:"contain"},null,8,["src"])):k("",!0),i(C,{round:"",dense:"",icon:"close",color:"white","text-color":"black",class:"absolute-top-right q-ma-sm",onClick:e[2]||(e[2]=a=>f.value=!1)})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},xt=Le(it,[["__scopeId","data-v-e26a4f04"]]);export{xt as default};
