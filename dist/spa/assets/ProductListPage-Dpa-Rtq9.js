import{v as I,b as u,x as o,y as W,A as K,K as bt,n as ne,Y as _e,_ as he,a6 as mt,r as z,J as H,a7 as St,E as Le,an as yt,q as Ae,ao as _t,ap as ht,B as wt,ad as Ee,aq as Ct,ar as qt,as as ye,at as $e,au as Pt,D as je,av as kt,aw as Se,ax as U,Q as E,l as Rt,a as xt,ay as Tt,az as Bt,f as Ft,o as Ot,w as A,p as D,g as $,ai as Lt,aA as $t,af as Vt}from"./index-CEvKOOos.js";import{Q as Dt}from"./QImg-C2tOMvLs.js";import{Q as Mt}from"./QList-JkMat8pW.js";import{u as Qt,a as At,c as Ne,b as Et,d as jt,e as Nt,Q as pt}from"./use-fullscreen-lx1jE9zt.js";import{Q as zt}from"./QPage-DgI7XAAt.js";import{u as Ht}from"./productStore-kIAXihmZ.js";import{_ as It}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QChip-Yh1JQf5n.js";import"./selection-DvxNEaLR.js";import"./format-fzmVlmdj.js";const Ve=I({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const a=K(),f=u(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return o("td",{class:f.value},W(l.default));const i=a.vnode.key,v=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(v===void 0)return;const{row:s}=e.props;return o("td",{class:f.value+v.__tdClass(s),style:v.__tdStyle(s)},W(l.default))}}}),Ut=I({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:a}){const f=K(),{proxy:{$q:i}}=f,v=s=>{a("click",s)};return()=>{if(e.props===void 0)return o("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:v},W(l.default));let s,d;const c=f.vnode.key;if(c){if(s=e.props.colsMap[c],s===void 0)return}else s=e.props.col;if(s.sortable===!0){const n=s.align==="right"?"unshift":"push";d=bt(l.default,[]),d[n](o(ne,{class:s.__iconClass,name:i.iconSet.table.arrowUp}))}else d=W(l.default);const w={class:s.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:s.headerStyle,onClick:n=>{s.sortable===!0&&e.props.sort(s),v(n)}};return o("th",w,d)}}}),Wt=["horizontal","vertical","cell","none"],Kt=I({name:"QMarkupTable",props:{..._e,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Wt.includes(e)}},setup(e,{slots:l}){const a=K(),f=he(e,a.proxy.$q),i=u(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(f.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>o("div",{class:i.value},[o("table",{class:"q-table"},W(l.default))])}});function pe(e,l){return o("div",e,[o("table",{class:"q-table"},l)])}const Gt={list:Mt,table:Kt},Jt=["list","table","__qtable"],Xt=I({name:"QVirtualScroll",props:{...Qt,type:{type:String,default:"list",validator:e=>Jt.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:mt},setup(e,{slots:l,attrs:a}){let f;const i=z(null),v=u(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:s,localResetVirtualScroll:d,padVirtualScroll:c,onVirtualScrollEvt:w}=At({virtualScrollLength:v,getVirtualScrollTarget:C,getVirtualScrollEl:h}),n=u(()=>{if(v.value===0)return[];const F=(O,x)=>({index:s.value.from+x,item:O});return e.itemsFn===void 0?e.items.slice(s.value.from,s.value.to).map(F):e.itemsFn(s.value.from,s.value.to-s.value.from).map(F)}),_=u(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),q=u(()=>e.scrollTarget!==void 0?{}:{tabindex:0});H(v,()=>{d()}),H(()=>e.scrollTarget,()=>{y(),m()});function h(){return i.value.$el||i.value}function C(){return f}function m(){f=St(h(),e.scrollTarget),f.addEventListener("scroll",w,Le.passive)}function y(){f!==void 0&&(f.removeEventListener("scroll",w,Le.passive),f=void 0)}function B(){let F=c(e.type==="list"?"div":"tbody",n.value.map(l.default));return l.before!==void 0&&(F=l.before().concat(F)),Ee(l.after,F)}return yt(()=>{d()}),Ae(()=>{m()}),_t(()=>{m()}),ht(()=>{y()}),wt(()=>{y()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?pe({ref:i,class:"q-table__middle "+_.value},B()):o(Gt[e.type],{...a,ref:i,class:[a.class,_.value],...q.value},B)}}}),Yt={xs:2,sm:4,md:6,lg:10,xl:14};function De(e,l,a){return{transform:l===!0?`translateX(${a.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Zt=I({name:"QLinearProgress",props:{..._e,...Ct,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:l}){const{proxy:a}=K(),f=he(e,a.$q),i=qt(e,Yt),v=u(()=>e.indeterminate===!0||e.query===!0),s=u(()=>e.reverse!==e.query),d=u(()=>({...i.value!==null?i.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),c=u(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),w=u(()=>De(e.buffer!==void 0?e.buffer:1,s.value,a.$q)),n=u(()=>`with${e.instantFeedback===!0?"out":""}-transition`),_=u(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${n.value} q-linear-progress__track--${f.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),q=u(()=>De(v.value===!0?1:e.value,s.value,a.$q)),h=u(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${n.value} q-linear-progress__model--${v.value===!0?"in":""}determinate`),C=u(()=>({width:`${e.value*100}%`})),m=u(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${n.value}`);return()=>{const y=[o("div",{class:_.value,style:w.value}),o("div",{class:h.value,style:q.value})];return e.stripe===!0&&v.value===!1&&y.push(o("div",{class:m.value,style:C.value})),o("div",{class:c.value,style:d.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ee(l.default,y))}}});function el(e,l){return new Date(e)-new Date(l)}const tl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function ll(e,l,a,f){const i=u(()=>{const{sortBy:d}=l.value;return d&&a.value.find(c=>c.name===d)||null}),v=u(()=>e.sortMethod!==void 0?e.sortMethod:(d,c,w)=>{const n=a.value.find(h=>h.name===c);if(n===void 0||n.field===void 0)return d;const _=w===!0?-1:1,q=typeof n.field=="function"?h=>n.field(h):h=>h[n.field];return d.sort((h,C)=>{let m=q(h),y=q(C);return n.rawSort!==void 0?n.rawSort(m,y,h,C)*_:m==null?-1*_:y==null?1*_:n.sort!==void 0?n.sort(m,y,h,C)*_:ye(m)===!0&&ye(y)===!0?(m-y)*_:$e(m)===!0&&$e(y)===!0?el(m,y)*_:typeof m=="boolean"&&typeof y=="boolean"?(m-y)*_:([m,y]=[m,y].map(B=>(B+"").toLocaleString().toLowerCase()),m<y?-1*_:m===y?0:_)})});function s(d){let c=e.columnSortOrder;if(Pt(d)===!0)d.sortOrder&&(c=d.sortOrder),d=d.name;else{const _=a.value.find(q=>q.name===d);_?.sortOrder&&(c=_.sortOrder)}let{sortBy:w,descending:n}=l.value;w!==d?(w=d,n=c==="da"):e.binaryStateSort===!0?n=!n:n===!0?c==="ad"?w=null:n=!1:c==="ad"?n=!0:w=null,f({sortBy:w,descending:n,page:1})}return{columnToSort:i,computedSortMethod:v,sort:s}}const al={filter:[String,Object],filterMethod:Function};function nl(e,l){const a=u(()=>e.filterMethod!==void 0?e.filterMethod:(f,i,v,s)=>{const d=i?i.toLowerCase():"";return f.filter(c=>v.some(w=>{const n=s(w,c)+"";return(n==="undefined"||n==="null"?"":n.toLowerCase()).indexOf(d)!==-1}))});return H(()=>e.filter,()=>{je(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function ol(e,l){for(const a in l)if(l[a]!==e[a])return!1;return!0}function Me(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const rl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function il(e,l){const{props:a,emit:f}=e,i=z(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length!==0?a.rowsPerPageOptions[0]:5},a.pagination)),v=u(()=>{const n=a["onUpdate:pagination"]!==void 0?{...i.value,...a.pagination}:i.value;return Me(n)}),s=u(()=>v.value.rowsNumber!==void 0);function d(n){c({pagination:n,filter:a.filter})}function c(n={}){je(()=>{f("request",{pagination:n.pagination||v.value,filter:n.filter||a.filter,getCellValue:l})})}function w(n,_){const q=Me({...v.value,...n});if(ol(v.value,q)===!0){s.value===!0&&_===!0&&d(q);return}if(s.value===!0){d(q);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?f("update:pagination",q):i.value=q}return{innerPagination:i,computedPagination:v,isServerSide:s,requestServerInteraction:c,setPagination:w}}function sl(e,l,a,f,i,v){const{props:s,emit:d,proxy:{$q:c}}=e,w=u(()=>f.value===!0?a.value.rowsNumber||0:v.value),n=u(()=>{const{page:x,rowsPerPage:T}=a.value;return(x-1)*T}),_=u(()=>{const{page:x,rowsPerPage:T}=a.value;return x*T}),q=u(()=>a.value.page===1),h=u(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(w.value/a.value.rowsPerPage))),C=u(()=>_.value===0?!0:a.value.page>=h.value),m=u(()=>(s.rowsPerPageOptions.includes(l.value.rowsPerPage)?s.rowsPerPageOptions:[l.value.rowsPerPage].concat(s.rowsPerPageOptions)).map(T=>({label:T===0?c.lang.table.allRows:""+T,value:T})));H(h,(x,T)=>{if(x===T)return;const G=a.value.page;x&&!G?i({page:1}):x<G&&i({page:x})});function y(){i({page:1})}function B(){const{page:x}=a.value;x>1&&i({page:x-1})}function F(){const{page:x,rowsPerPage:T}=a.value;_.value>0&&x*T<w.value&&i({page:x+1})}function O(){i({page:h.value})}return s["onUpdate:pagination"]!==void 0&&d("update:pagination",{...a.value}),{firstRowIndex:n,lastRowIndex:_,isFirstPage:q,isLastPage:C,pagesNumber:h,computedRowsPerPageOptions:m,computedRowsNumber:w,firstPage:y,prevPage:B,nextPage:F,lastPage:O}}const ul={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},cl=["update:selected","selection"];function dl(e,l,a,f){const i=u(()=>{const C={};return e.selected.map(f.value).forEach(m=>{C[m]=!0}),C}),v=u(()=>e.selection!=="none"),s=u(()=>e.selection==="single"),d=u(()=>e.selection==="multiple"),c=u(()=>a.value.length!==0&&a.value.every(C=>i.value[f.value(C)]===!0)),w=u(()=>c.value!==!0&&a.value.some(C=>i.value[f.value(C)]===!0)),n=u(()=>e.selected.length);function _(C){return i.value[C]===!0}function q(){l("update:selected",[])}function h(C,m,y,B){l("selection",{rows:m,added:y,keys:C,evt:B});const F=s.value===!0?y===!0?m:[]:y===!0?e.selected.concat(m):e.selected.filter(O=>C.includes(f.value(O))===!1);l("update:selected",F)}return{hasSelectionMode:v,singleSelection:s,multipleSelection:d,allRowsSelected:c,someRowsSelected:w,rowsSelectedNumber:n,isRowSelected:_,clearSelection:q,updateSelection:h}}function Qe(e){return Array.isArray(e)?e.slice():[]}const vl={expanded:Array},fl=["update:expanded"];function gl(e,l){const a=z(Qe(e.expanded));H(()=>e.expanded,s=>{a.value=Qe(s)});function f(s){return a.value.includes(s)}function i(s){e.expanded!==void 0?l("update:expanded",s):a.value=s}function v(s,d){const c=a.value.slice(),w=c.indexOf(s);d===!0?w===-1&&(c.push(s),i(c)):w!==-1&&(c.splice(w,1),i(c))}return{isRowExpanded:f,setExpanded:i,updateExpanded:v}}const bl={visibleColumns:Array};function ml(e,l,a){const f=u(()=>{if(e.columns!==void 0)return e.columns;const d=e.rows[0];return d!==void 0?Object.keys(d).map(c=>({name:c,label:c.toUpperCase(),field:c,align:ye(d[c])?"right":"left",sortable:!0})):[]}),i=u(()=>{const{sortBy:d,descending:c}=l.value;return(e.visibleColumns!==void 0?f.value.filter(n=>n.required===!0||e.visibleColumns.includes(n.name)===!0):f.value).map(n=>{const _=n.align||"right",q=`text-${_}`;return{...n,align:_,__iconClass:`q-table__sort-icon q-table__sort-icon--${_}`,__thClass:q+(n.headerClasses!==void 0?" "+n.headerClasses:"")+(n.sortable===!0?" sortable":"")+(n.name===d?` sorted ${c===!0?"sort-desc":""}`:""),__tdStyle:n.style!==void 0?typeof n.style!="function"?()=>n.style:n.style:()=>null,__tdClass:n.classes!==void 0?typeof n.classes!="function"?()=>q+" "+n.classes:h=>q+" "+n.classes(h):()=>q}})}),v=u(()=>{const d={};return i.value.forEach(c=>{d[c.name]=c}),d}),s=u(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(a.value===!0?1:0));return{colList:f,computedCols:i,computedColsMap:v,computedColspan:s}}const ae="q-table__bottom row items-center",ze={};Ne.forEach(e=>{ze[e]={}});const Sl=I({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...ze,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,..._e,...jt,...bl,...al,...rl,...vl,...ul,...tl},emits:["request","virtualScroll",...Et,...fl,...cl],setup(e,{slots:l,emit:a}){const f=K(),{proxy:{$q:i}}=f,v=he(e,i),{inFullscreen:s,toggleFullscreen:d}=Nt(),c=u(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),w=z(null),n=z(null),_=u(()=>e.grid!==!0&&e.virtualScroll===!0),q=u(()=>" q-table__card"+(v.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),h=u(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":q.value)+(v.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(s.value===!0?" fullscreen scroll":"")),C=u(()=>h.value+(e.loading===!0?" q-table--loading":""));H(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+h.value,()=>{_.value===!0&&n.value?.reset()});const{innerPagination:m,computedPagination:y,isServerSide:B,requestServerInteraction:F,setPagination:O}=il(f,N),{computedFilterMethod:x}=nl(e,O),{isRowExpanded:T,setExpanded:G,updateExpanded:He}=gl(e,a),oe=u(()=>{let t=e.rows;if(B.value===!0||t.length===0)return t;const{sortBy:r,descending:g}=y.value;return e.filter&&(t=x.value(t,e.filter,V.value,N)),Ge.value!==null&&(t=Je.value(e.rows===t?t.slice():t,r,g)),t}),we=u(()=>oe.value.length),M=u(()=>{let t=oe.value;if(B.value===!0)return t;const{rowsPerPage:r}=y.value;return r!==0&&(X.value===0&&e.rows!==t?t.length>Y.value&&(t=t.slice(0,Y.value)):t=t.slice(X.value,Y.value)),t}),{hasSelectionMode:j,singleSelection:Ie,multipleSelection:Ce,allRowsSelected:Ue,someRowsSelected:qe,rowsSelectedNumber:re,isRowSelected:ie,clearSelection:We,updateSelection:J}=dl(e,a,M,c),{colList:Ke,computedCols:V,computedColsMap:Pe,computedColspan:ke}=ml(e,y,j),{columnToSort:Ge,computedSortMethod:Je,sort:se}=ll(e,y,Ke,O),{firstRowIndex:X,lastRowIndex:Y,isFirstPage:ue,isLastPage:ce,pagesNumber:Z,computedRowsPerPageOptions:Xe,computedRowsNumber:ee,firstPage:de,prevPage:ve,nextPage:fe,lastPage:ge}=sl(f,m,y,B,O,we),Ye=u(()=>M.value.length===0),Ze=u(()=>{const t={};return Ne.forEach(r=>{t[r]=e[r]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function et(){_.value===!0&&n.value.reset()}function tt(){if(e.grid===!0)return ft();const t=e.hideHeader!==!0?Fe:null;if(_.value===!0){const g=l["top-row"],b=l["bottom-row"],S={default:R=>xe(R.item,l.body,R.index)};if(g!==void 0){const R=o("tbody",g({cols:V.value}));S.before=t===null?()=>R:()=>[t()].concat(R)}else t!==null&&(S.before=t);return b!==void 0&&(S.after=()=>o("tbody",b({cols:V.value}))),o(Xt,{ref:n,class:e.tableClass,style:e.tableStyle,...Ze.value,scrollTarget:e.virtualScrollTarget,items:M.value,type:"__qtable",tableColspan:ke.value,onVirtualScroll:at},S)}const r=[nt()];return t!==null&&r.unshift(t()),pe({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},r)}function lt(t,r){if(n.value!==null){n.value.scrollTo(t,r);return}t=parseInt(t,10);const g=w.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(g!==null){const b=w.value.querySelector(".q-table__middle.scroll"),S=g.offsetTop-e.virtualScrollStickySizeStart,R=S<b.scrollTop?"decrease":"increase";b.scrollTop=S,a("virtualScroll",{index:t,from:0,to:m.value.rowsPerPage-1,direction:R})}}function at(t){a("virtualScroll",t)}function Re(){return[o(Zt,{class:"q-table__linear-progress",color:e.color,dark:v.value,indeterminate:!0,trackColor:"transparent"})]}function xe(t,r,g){const b=c.value(t),S=ie(b);if(r!==void 0){const k={key:b,row:t,pageIndex:g,__trClass:S?"selected":""};if(e.tableRowStyleFn!==void 0&&(k.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const Q=e.tableRowClassFn(t);Q&&(k.__trClass=`${Q} ${k.__trClass}`)}return r(Te(k))}const R=l["body-cell"],P=V.value.map(k=>{const Q=l[`body-cell-${k.name}`],le=Q!==void 0?Q:R;return le!==void 0?le(ot({key:b,row:t,pageIndex:g,col:k})):o("td",{class:k.__tdClass(t),style:k.__tdStyle(t)},N(k,t))});if(j.value===!0){const k=l["body-selection"],Q=k!==void 0?k(rt({key:b,row:t,pageIndex:g})):[o(Se,{modelValue:S,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(le,gt)=>{J([b],[t],le,gt)}})];P.unshift(o("td",{class:"q-table--col-auto-width"},Q))}const L={key:b,class:{selected:S}};if(e.onRowClick!==void 0&&(L.class["cursor-pointer"]=!0,L.onClick=k=>{a("rowClick",k,t,g)}),e.onRowDblclick!==void 0&&(L.class["cursor-pointer"]=!0,L.onDblclick=k=>{a("rowDblclick",k,t,g)}),e.onRowContextmenu!==void 0&&(L.class["cursor-pointer"]=!0,L.onContextmenu=k=>{a("rowContextmenu",k,t,g)}),e.tableRowStyleFn!==void 0&&(L.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const k=e.tableRowClassFn(t);k&&(L.class[k]=!0)}return o("tr",L,P)}function nt(){const t=l.body,r=l["top-row"],g=l["bottom-row"];let b=M.value.map((S,R)=>xe(S,t,R));return r!==void 0&&(b=r({cols:V.value}).concat(b)),g!==void 0&&(b=b.concat(g({cols:V.value}))),o("tbody",b)}function Te(t){return be(t),t.cols=t.cols.map(r=>U({...r},"value",()=>N(r,t.row))),t}function ot(t){return be(t),U(t,"value",()=>N(t.col,t.row)),t}function rt(t){return be(t),t}function be(t){Object.assign(t,{cols:V.value,colsMap:Pe.value,sort:se,rowIndex:X.value+t.pageIndex,color:e.color,dark:v.value,dense:e.dense}),j.value===!0&&U(t,"selected",()=>ie(t.key),(r,g)=>{J([t.key],[t.row],r,g)}),U(t,"expand",()=>T(t.key),r=>{He(t.key,r)})}function N(t,r){const g=typeof t.field=="function"?t.field(r):r[t.field];return t.format!==void 0?t.format(g,r):g}const p=u(()=>({pagination:y.value,pagesNumber:Z.value,isFirstPage:ue.value,isLastPage:ce.value,firstPage:de,prevPage:ve,nextPage:fe,lastPage:ge,inFullscreen:s.value,toggleFullscreen:d}));function it(){const t=l.top,r=l["top-left"],g=l["top-right"],b=l["top-selection"],S=j.value===!0&&b!==void 0&&re.value>0,R="q-table__top relative-position row items-center";if(t!==void 0)return o("div",{class:R},[t(p.value)]);let P;if(S===!0?P=b(p.value).slice():(P=[],r!==void 0?P.push(o("div",{class:"q-table__control"},[r(p.value)])):e.title&&P.push(o("div",{class:"q-table__control"},[o("div",{class:["q-table__title",e.titleClass]},e.title)]))),g!==void 0&&(P.push(o("div",{class:"q-table__separator col"})),P.push(o("div",{class:"q-table__control"},[g(p.value)]))),P.length!==0)return o("div",{class:R},P)}const Be=u(()=>qe.value===!0?null:Ue.value);function Fe(){const t=st();return e.loading===!0&&l.loading===void 0&&t.push(o("tr",{class:"q-table__progress"},[o("th",{class:"relative-position",colspan:ke.value},Re())])),o("thead",t)}function st(){const t=l.header,r=l["header-cell"];if(t!==void 0)return t(me({header:!0})).slice();const g=V.value.map(b=>{const S=l[`header-cell-${b.name}`],R=S!==void 0?S:r,P=me({col:b});return R!==void 0?R(P):o(Ut,{key:b.name,props:P},()=>b.label)});if(Ie.value===!0&&e.grid!==!0)g.unshift(o("th",{class:"q-table--col-auto-width"}," "));else if(Ce.value===!0){const b=l["header-selection"],S=b!==void 0?b(me({})):[o(Se,{color:e.color,modelValue:Be.value,dark:v.value,dense:e.dense,"onUpdate:modelValue":Oe})];g.unshift(o("th",{class:"q-table--col-auto-width"},S))}return[o("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},g)]}function me(t){return Object.assign(t,{cols:V.value,sort:se,colsMap:Pe.value,color:e.color,dark:v.value,dense:e.dense}),Ce.value===!0&&U(t,"selected",()=>Be.value,Oe),t}function Oe(t){qe.value===!0&&(t=!1),J(M.value.map(c.value),M.value,t)}const te=u(()=>{const t=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?t.reverse():t});function ut(){if(e.hideBottom===!0)return;if(Ye.value===!0){if(e.hideNoData===!0)return;const g=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,b=l["no-data"],S=b!==void 0?[b({message:g,icon:i.iconSet.table.warning,filter:e.filter})]:[o(ne,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),g];return o("div",{class:ae+" q-table__bottom--nodata"},S)}const t=l.bottom;if(t!==void 0)return o("div",{class:ae},[t(p.value)]);const r=e.hideSelectedBanner!==!0&&j.value===!0&&re.value>0?[o("div",{class:"q-table__control"},[o("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)(re.value)])])]:[];if(e.hidePagination!==!0)return o("div",{class:ae+" justify-end"},dt(r));if(r.length!==0)return o("div",{class:ae},r)}function ct(t){O({page:1,rowsPerPage:t.value})}function dt(t){let r;const{rowsPerPage:g}=y.value,b=e.paginationLabel||i.lang.table.pagination,S=l.pagination,R=e.rowsPerPageOptions.length>1;if(t.push(o("div",{class:"q-table__separator col"})),R===!0&&t.push(o("div",{class:"q-table__control"},[o("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),o(pt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:g,options:Xe.value,displayValue:g===0?i.lang.table.allRows:g,dark:v.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":ct})])),S!==void 0)r=S(p.value);else if(r=[o("span",g!==0?{class:"q-table__bottom-item"}:{},[g?b(X.value+1,Math.min(Y.value,ee.value),ee.value):b(1,we.value,ee.value)])],g!==0&&Z.value>1){const P={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(P.size="sm"),Z.value>2&&r.push(o(E,{key:"pgFirst",...P,icon:te.value[0],disable:ue.value,"aria-label":i.lang.pagination.first,onClick:de})),r.push(o(E,{key:"pgPrev",...P,icon:te.value[1],disable:ue.value,"aria-label":i.lang.pagination.prev,onClick:ve}),o(E,{key:"pgNext",...P,icon:te.value[2],disable:ce.value,"aria-label":i.lang.pagination.next,onClick:fe})),Z.value>2&&r.push(o(E,{key:"pgLast",...P,icon:te.value[3],disable:ce.value,"aria-label":i.lang.pagination.last,onClick:ge}))}return t.push(o("div",{class:"q-table__control"},r)),t}function vt(){const t=e.gridHeader===!0?[o("table",{class:"q-table"},[Fe()])]:e.loading===!0&&l.loading===void 0?Re():void 0;return o("div",{class:"q-table__middle"},t)}function ft(){const t=l.item!==void 0?l.item:r=>{const g=r.cols.map(S=>o("div",{class:"q-table__grid-item-row"},[o("div",{class:"q-table__grid-item-title"},[S.label]),o("div",{class:"q-table__grid-item-value"},[S.value])]));if(j.value===!0){const S=l["body-selection"],R=S!==void 0?S(r):[o(Se,{modelValue:r.selected,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(P,L)=>{J([r.key],[r.row],P,L)}})];g.unshift(o("div",{class:"q-table__grid-item-row"},R),o(Rt,{dark:v.value}))}const b={class:["q-table__grid-item-card"+q.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(b.style=[b.style,e.cardStyleFn(r.row)]),e.cardClassFn!==void 0){const S=e.cardClassFn(r.row);S&&(b.class[0]+=` ${S}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(b.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(b.onClick=S=>{a("RowClick",S,r.row,r.pageIndex)}),e.onRowDblclick!==void 0&&(b.onDblclick=S=>{a("RowDblclick",S,r.row,r.pageIndex)}),e.onRowContextmenu!==void 0&&(b.onContextmenu=S=>{a("rowContextmenu",S,r.row,r.pageIndex)})),o("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(r.selected===!0?" q-table__grid-item--selected":"")},[o("div",b,g)])};return o("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},M.value.map((r,g)=>t(Te({key:c.value(r),row:r,pageIndex:g}))))}return Object.assign(f.proxy,{requestServerInteraction:F,setPagination:O,firstPage:de,prevPage:ve,nextPage:fe,lastPage:ge,isRowSelected:ie,clearSelection:We,isRowExpanded:T,setExpanded:G,sort:se,resetVirtualScroll:et,scrollTo:lt,getCellValue:N}),kt(f.proxy,{filteredSortedRows:()=>oe.value,computedRows:()=>M.value,computedRowsNumber:()=>ee.value}),()=>{const t=[it()],r={ref:w,class:C.value};return e.grid===!0?t.push(vt()):Object.assign(r,{class:[r.class,e.cardClass],style:e.cardStyle}),t.push(tt(),ut()),e.loading===!0&&l.loading!==void 0&&t.push(l.loading()),o("div",r,t)}}}),yl={class:"container"},_l={class:"row q-mb-md"},hl={class:"col-12 col-md-6"},wl={class:"col-12 col-md-6 flex flex-center flex-md-end"},Cl={class:"row"},ql={class:"col-12"},Pl={__name:"ProductListPage",setup(e){const l=xt(),a=Ht(),{products:f,loading:i}=Tt(a),v=Bt(),s=z(""),d=[{name:"avatar_url",label:"Imagen",field:"avatar_url",align:"left"},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"category",label:"Categoria",field:h=>h.category.name,align:"left",sortable:!0},{name:"reference",label:"Código",field:"reference",align:"left",sortable:!0},{name:"description",label:"Descripción",field:"description",align:"left"},{name:"actions",label:"Acciones",field:"actions",align:"right"}];Ae(()=>{a.fetchAllProducts()});const c=()=>{l.push({name:"product-create"})},w=h=>{l.push({name:"product-edit",params:{id:h}})},n=h=>{v.dialog({title:"Confirmar",message:"¿Estás seguro de que quieres eliminar este producto?",cancel:!0,persistent:!0}).onOk(async()=>{try{await a.deleteProduct(h),v.notify({color:"positive",message:"Producto eliminado correctamente"})}catch(C){v.notify({color:"negative",message:`Error al eliminar el producto: ${C.message}`})}})},_=()=>{s.value=""},q=u(()=>{if(!s.value)return f.value;const h=s.value.toLowerCase();return f.value.filter(C=>C.name.toLowerCase().includes(h)||C.reference.toLowerCase().includes(h))});return(h,C)=>(Ot(),Ft(zt,{padding:""},{default:A(()=>[D("div",yl,[C[1]||(C[1]=D("div",{class:"row"},[D("div",{class:"col-12"},[D("h1",{class:"text-h4"},"Lista de Productos")])],-1)),D("div",_l,[D("div",hl,[$(Lt,{modelValue:s.value,"onUpdate:modelValue":C[0]||(C[0]=m=>s.value=m),filled:"",label:"Buscar por nombre o referencia",clearable:"",debounce:300},$t({prepend:A(()=>[$(ne,{name:"search"})]),_:2},[s.value?{name:"append",fn:A(()=>[$(ne,{name:"close",onClick:_,class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue"])]),D("div",wl,[$(E,{color:"primary",icon:"add_circle",label:"Crear Producto",onClick:c})])]),D("div",Cl,[D("div",ql,[$(Sl,{rows:q.value,columns:d,"row-key":"id",loading:Vt(i),filter:s.value},{"body-cell-avatar_url":A(m=>[$(Ve,{props:m},{default:A(()=>[$(Dt,{src:m.row.avatar_url,style:{height:"50px","max-width":"50px"},contain:""},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-actions":A(m=>[$(Ve,{props:m},{default:A(()=>[$(E,{flat:"",round:"",icon:"edit",onClick:y=>w(m.row.id)},null,8,["onClick"]),$(E,{flat:"",round:"",icon:"delete",color:"negative",onClick:y=>n(m.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading","filter"])])])])]),_:1}))}},Dl=It(Pl,[["__scopeId","data-v-17cb0fa3"]]);export{Dl as default};
