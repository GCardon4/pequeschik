import{r as s,a as y,u as x,f as w,o as f,w as l,g as t,n as _,a2 as b,i as Q,a0 as V,l as d,Q as h,t as k}from"./index-B0f3dEv-.js";import{Q as C,a as v}from"./QForm-DewzoOF-.js";import{Q as B}from"./QCard-DEKXFLqq.js";import{Q as I}from"./QPage-DN2uWkHp.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-key-composition-BIBOpLlr.js";import"./use-dark-DlWYTmWW.js";import"./focus-manager-zjdVGI5d.js";const q={key:0,class:"text-negative text-center text-caption q-mt-sm"},L={__name:"LoginPage",setup(P){const i=s(""),n=s(""),o=s(!1),u=s(!1),r=s(""),m=y(),p=x(),g=async()=>{r.value="",u.value=!0;try{await p.login(i.value,n.value),p.userRole==="admin"?m.push("/admin"):m.push("/")}catch(c){r.value=c.message||"Error al iniciar sesión"}finally{u.value=!1}};return(c,e)=>(f(),w(I,{class:"flex flex-center bg-grey-2"},{default:l(()=>[t(B,{class:"q-pa-lg shadow-2 rounded-borders text-center",style:{width:"350px","max-width":"90vw"}},{default:l(()=>[e[3]||(e[3]=_("div",{class:"text-h6 text-center q-mb-md"},"Iniciar Sesión",-1)),t(C,{onSubmit:b(g,["prevent"]),class:"q-gutter-md"},{default:l(()=>[t(v,{filled:"",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),type:"email",label:"Correo electrónico","lazy-rules":"",rules:[a=>!!a||"El correo es obligatorio"]},{prepend:l(()=>[t(d,{name:"email"})]),_:1},8,["modelValue","rules"]),t(v,{filled:"",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a),type:o.value?"text":"password",label:"Contraseña","lazy-rules":"",rules:[a=>!!a||"La contraseña es obligatoria"]},{prepend:l(()=>[t(d,{name:"lock"})]),append:l(()=>[t(d,{name:o.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>o.value=!o.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),t(h,{label:"Ingresar",color:"primary",class:"full-width",type:"submit",loading:u.value},null,8,["loading"]),r.value?(f(),Q("div",q,k(r.value),1)):V("",!0)]),_:1})]),_:1})]),_:1}))}},F=S(L,[["__scopeId","data-v-ed9e4112"]]);export{F as default};
