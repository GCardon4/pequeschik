import{Q as ge}from"./QSpinnerGears-BlFtP82a.js";import{q as he,z as ye,r as y,b as q,I as j,A as U,L as z,O as F,v as W,a3 as be,x as _e,V as we,a4 as ke,p as xe,f as S,o as r,w as h,i as v,g as i,n as s,a0 as k,Q as C,h as O,t as x,F as G,k as J}from"./index-eF1tfxb5.js";import{u as I,v as Pe,a as K,b as Te,p as X,c as Se,d as Ce,e as Qe,f as qe,g as Oe,h as Ve,r as Y,s as Ee,Q as Z,i as He}from"./QDialog-Bf7oFLCu.js";import{u as De,s as Ie,a as $e,b as Ne,c as ee,g as Ae}from"./selection-CMbmD-yi.js";import{u as Be}from"./use-timeout-DsHolzV1.js";import{Q as $}from"./QImg-BO7HGhzx.js";import{Q as Re}from"./QSeparator-G5jSf6-i.js";import{Q as Le}from"./QCardSection-C8OqjwBL.js";import{Q as te}from"./QCard-CdvORZn1.js";import{Q as Me}from"./QPage-Do2V5iIH.js";import{u as je}from"./productStore-Ch9hK29T.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-CwhEGbSz.js";import"./focus-manager-zjdVGI5d.js";const ze=he({name:"QTooltip",inheritAttrs:!1,props:{...Te,...$e,...I,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...I.transitionShow,default:"jump-down"},transitionHide:{...I.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:K},self:{type:String,default:"top middle",validator:K},offset:{type:Array,default:()=>[14,14],validator:Pe},scrollTarget:Ie,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...De],setup(o,{slots:V,emit:b,attrs:t}){let c,d;const f=ye(),{proxy:{$q:n}}=f,p=y(null),_=y(!1),E=q(()=>X(o.anchor,n.lang.rtl)),u=q(()=>X(o.self,n.lang.rtl)),e=q(()=>o.persistent!==!0),{registerTick:a,removeTick:Q}=Se(),{registerTimeout:w}=Be(),{transitionProps:oe,transitionStyle:ae}=Ce(o),{localScrollTarget:N,changeScrollEvent:se,unconfigureScrollTarget:le}=Qe(o,L),{anchorEl:m,canShow:re,anchorEvents:P}=qe({showing:_,configureAnchorEl:ve}),{show:ne,hide:H}=Ne({showing:_,canShow:re,handleShow:ue,handleHide:ce,hideOnRouteChange:e,processOnMount:!0});Object.assign(P,{delayShow:de,delayHide:me});const{showPortal:A,hidePortal:B,renderPortal:ie}=Oe(f,p,pe,"tooltip");if(n.platform.is.mobile===!0){const l={anchorEl:m,innerRef:p,onClickOutside(g){return H(g),g.target.classList.contains("q-dialog__backdrop")&&we(g),!0}},D=q(()=>o.modelValue===null&&o.persistent!==!0&&_.value===!0);j(D,g=>{(g===!0?Ve:Y)(l)}),U(()=>{Y(l)})}function ue(l){A(),a(()=>{d=new MutationObserver(()=>T()),d.observe(p.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),T(),L()}),c===void 0&&(c=j(()=>n.screen.width+"|"+n.screen.height+"|"+o.self+"|"+o.anchor+"|"+n.lang.rtl,T)),w(()=>{A(!0),b("show",l)},o.transitionDuration)}function ce(l){Q(),B(),R(),w(()=>{B(!0),b("hide",l)},o.transitionDuration)}function R(){d!==void 0&&(d.disconnect(),d=void 0),c!==void 0&&(c(),c=void 0),le(),z(P,"tooltipTemp")}function T(){Ee({targetEl:p.value,offset:o.offset,anchorEl:m.value,anchorOrigin:E.value,selfOrigin:u.value,maxHeight:o.maxHeight,maxWidth:o.maxWidth})}function de(l){if(n.platform.is.mobile===!0){ee(),document.body.classList.add("non-selectable");const D=m.value,g=["touchmove","touchcancel","touchend","click"].map(M=>[D,M,"delayHide","passiveCapture"]);F(P,"tooltipTemp",g)}w(()=>{ne(l)},o.delay)}function me(l){n.platform.is.mobile===!0&&(z(P,"tooltipTemp"),ee(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),w(()=>{H(l)},o.hideDelay)}function ve(){if(o.noParentEvent===!0||m.value===null)return;const l=n.platform.is.mobile===!0?[[m.value,"touchstart","delayShow","passive"]]:[[m.value,"mouseenter","delayShow","passive"],[m.value,"mouseleave","delayHide","passive"]];F(P,"anchor",l)}function L(){if(m.value!==null||o.scrollTarget!==void 0){N.value=Ae(m.value,o.scrollTarget);const l=o.noParentEvent===!0?T:H;se(N.value,l)}}function fe(){return _.value===!0?W("div",{...t,ref:p,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",t.class],style:[t.style,ae.value],role:"tooltip"},_e(V.default)):null}function pe(){return W(be,oe.value,fe)}return U(R),Object.assign(f.proxy,{updatePosition:T}),ie}}),Fe={key:0,class:"flex flex-center"},We={key:1,class:"product-view-container"},Ge={class:"row"},Je={class:"text-h4 q-mb-sm col"},Ke={class:"text-subtitle1 text-grey-7"},Xe={key:0,class:"q-mt-md desc-product"},Ye={key:1,class:"row"},Ze={class:"col text-h6"},et={key:0,class:"col"},tt={class:"text-subtitle2 col"},ot={class:"text-h5 text-bold q-my-md text-primary"},at={class:"row items-center justify-between"},st={class:"text-subtitle1"},lt={class:"text-bold"},rt={class:"row q-gutter-md"},nt={key:0,class:"q-mt-xl"},it={class:"row q-gutter-md"},ut={key:2,class:"text-center"},ct={__name:"ProductViewPage",setup(o){const V=ke(),b=je(),t=y(null),c=y([]),d=y(!0),f=y(!1),n=y("");xe(async()=>{const u=V.params.id;d.value=!0,await b.fetchProductById(u),t.value=b.selectedProduct,t.value&&(c.value=await b.fetchGallery(u)),d.value=!1});function p(u){n.value=u,f.value=!0}function _(){const u="573137894436",e=t.value.name,a=t.value.reference,Q=`Hola, estoy interesado en el producto: *${e}* (Ref: *${a}*). ¿Podrías darme más información?`,w=`https://wa.me/${u}?text=${encodeURIComponent(Q)}`;window.open(w,"_blank")}const E=u=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(u);return(u,e)=>(r(),S(Me,{class:"q-pa-md"},{default:h(()=>[d.value?(r(),v("div",Fe,[i(ge,{size:"50px",color:"primary"})])):t.value?(r(),v("div",We,[i(C,{flat:"",icon:"arrow_back",label:"Volver al catálogo",onClick:e[0]||(e[0]=a=>u.$router.go(-1)),class:"q-mb-md"}),s("div",{class:"cursor-pointer",onClick:e[1]||(e[1]=a=>p(t.value.avatar_url))},[i($,{src:t.value.avatar_url,class:"product-avatar-large rounded-borders"},{default:h(()=>[i(ze,null,{default:h(()=>[...e[4]||(e[4]=[O("Haz clic para ver la imagen completa",-1)])]),_:1})]),_:1},8,["src"])]),i(te,{flat:"",bordered:"",class:"q-mt-lg"},{default:h(()=>[i(Le,null,{default:h(()=>[s("div",Ge,[s("div",Je,x(t.value.name),1),s("div",Ke,"Ref: "+x(t.value.reference),1),t.value.category?(r(),S(Z,{key:0,label:t.value.category.name,color:"primary","text-color":"white"},null,8,["label"])):k("",!0)]),t.value.description?(r(),v("div",Xe,[s("p",null,x(t.value.description),1)])):k("",!0),t.value.subcategory?(r(),v("div",Ye,[s("div",Ze,x(t.value.subcategory),1),t.value.sizes?(r(),v("div",et,[s("div",tt,[e[5]||(e[5]=O("Tallas disponibles: ",-1)),(r(!0),v(G,null,J(t.value.sizes.split(","),a=>(r(),S(Z,{key:a,label:a.trim(),outline:"",color:"secondary"},null,8,["label"]))),128))])])):k("",!0)])):k("",!0),s("div",ot,x(E(t.value.price)),1),i(Re,{class:"q-my-lg"}),s("div",at,[s("div",st,[e[6]||(e[6]=O(" Stock: ",-1)),s("span",lt,x(t.value.stock),1),e[7]||(e[7]=O(" unidades ",-1))]),s("div",rt,[i(C,{round:"",color:"pink",icon:"favorite_border"}),i(C,{unelevated:"",color:"positive",icon:"shopping_cart",label:"Quiero este Producto",onClick:_})])])]),_:1})]),_:1}),c.value.length>0?(r(),v("div",nt,[e[8]||(e[8]=s("div",{class:"text-h6 q-mb-md"},"Galería del Producto",-1)),s("div",it,[(r(!0),v(G,null,J(c.value,a=>(r(),S($,{key:a.id,src:a.image_url,class:"gallery-thumbnail cursor-pointer rounded-borders",onClick:Q=>p(a.image_url)},null,8,["src","onClick"]))),128))])])):k("",!0)])):(r(),v("div",ut,[e[9]||(e[9]=s("div",{class:"text-h5"},"Producto no encontrado",-1)),i(C,{to:"/",label:"Volver al inicio",color:"primary",class:"q-mt-md"})])),i(He,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value=a)},{default:h(()=>[i(te,{style:{"max-width":"500px","max-height":"500px"},class:""},{default:h(()=>[n.value?(r(),S($,{key:0,src:n.value,fit:"contain"},null,8,["src"])):k("",!0),i(C,{round:"",dense:"",icon:"close",color:"white","text-color":"black",class:"absolute-top-right q-ma-sm",onClick:e[2]||(e[2]=a=>f.value=!1)})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Tt=Ue(ct,[["__scopeId","data-v-ea01a75a"]]);export{Tt as default};
