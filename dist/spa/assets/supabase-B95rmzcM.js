import{u as n,s as e}from"./index-BB96JGY1.js";const f=async({app:u})=>{const s=n(),{data:{session:a}}=await e.auth.getSession();if(a&&(s.user=a.user,await s.loadProfile()),typeof window<"u"){window.__supabaseAuthListener&&window.__supabaseAuthListener.unsubscribe();const{data:{subscription:i}}=e.auth.onAuthStateChange((t,o)=>{t==="SIGNED_IN"?(s.user=o.user,s.loadProfile()):t==="SIGNED_OUT"&&(s.user=null,s.profile=null)});window.__supabaseAuthListener=i}u.config.globalProperties.$supabase=e};export{f as default};
