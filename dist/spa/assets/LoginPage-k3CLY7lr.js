import{r as s,a as y,u as x,f as w,o as v,w as l,g as t,ag as _,p as b,ah as Q,i as V,ae as h,ai as f,n as d,Q as k,t as C}from"./index-CEvKOOos.js";import{Q as B}from"./QForm-BA9sEay7.js";import{Q as I}from"./QPage-DgI7XAAt.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"text-negative text-center text-caption q-mt-sm"},L={__name:"LoginPage",setup(P){const n=s(""),i=s(""),o=s(!1),u=s(!1),r=s(""),m=y(),p=x(),g=async()=>{r.value="",u.value=!0;try{await p.login(n.value,i.value),p.userRole==="admin"?m.push("/admin"):m.push("/")}catch(c){r.value=c.message||"Error al iniciar sesión"}finally{u.value=!1}};return(c,e)=>(v(),w(I,{class:"flex flex-center bg-grey-2"},{default:l(()=>[t(_,{class:"q-pa-lg shadow-2 rounded-borders text-center",style:{width:"350px","max-width":"90vw"}},{default:l(()=>[e[3]||(e[3]=b("div",{class:"text-h6 text-center q-mb-md"},"Iniciar Sesión",-1)),t(B,{onSubmit:Q(g,["prevent"]),class:"q-gutter-md"},{default:l(()=>[t(f,{filled:"",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),type:"email",label:"Correo electrónico","lazy-rules":"",rules:[a=>!!a||"El correo es obligatorio"]},{prepend:l(()=>[t(d,{name:"email"})]),_:1},8,["modelValue","rules"]),t(f,{filled:"",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value=a),type:o.value?"text":"password",label:"Contraseña","lazy-rules":"",rules:[a=>!!a||"La contraseña es obligatoria"]},{prepend:l(()=>[t(d,{name:"lock"})]),append:l(()=>[t(d,{name:o.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>o.value=!o.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),t(k,{label:"Ingresar",color:"primary",class:"full-width",type:"submit",loading:u.value},null,8,["loading"]),r.value?(v(),V("div",q,C(r.value),1)):h("",!0)]),_:1})]),_:1})]),_:1}))}},R=S(L,[["__scopeId","data-v-ed9e4112"]]);export{R as default};
